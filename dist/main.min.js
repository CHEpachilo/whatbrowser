/**
 * whatbrowser.ru, version 0.1.0
 *
 * whatbrowser.ru is freely distributable under the terms of MIT-style license
 * For details, see https://github.com/algenon/whatbrowser
 */
!function(a,b,c,d,e){"use strict";function f(){if(s.cookieEnabled)return!0;document.cookie="cookietest=1";var a=-1!=document.cookie.indexOf("cookietest=");return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",a}function g(){try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(a)return!0}catch(b){if(s.mimeTypes&&void 0!=s.mimeTypes["application/x-shockwave-flash"]&&s.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return!0}return!1}function h(a,b,c,d){a[b]=d?d[b]:c()}function i(b,c){var d=b;h(b,"browser_size",function(){return{height:a.innerHeight,width:a.innerWidth}},c),d.browser_size.toString=function(){return d.browser_size.width+" x "+d.browser_size.height+" px"}}function j(a,b){h(a,"cookies",function(){return f()},b)}function k(a,b){var c=a;h(a,"flash",function(){return{enabled:g(),version:d.getFlashPlayerVersion()}},b),c.flash.toString=function(){return c.flash.enabled?c.flash.version.major+"."+c.flash.version.minor+"."+c.flash.version.release:"нет"}}function l(a,b){var c=a;h(a,"java",function(){return{enabled:s.javaEnabled(),version:e.getJREs().shift()||""}},b),c.java.toString=function(){return c.java.enabled?c.java.version||"да":"нет"}}function m(a,b){h(a,"language",function(){return s.language||s.userLanguage},b)}function n(a,b){h(a,"online",function(){return s.onLine},b)}function o(b,c){var d=b;h(b,"screen",function(){return{color_depth:a.screen.colorDepth,height:a.screen.height,width:a.screen.width}},c),d.screen.toString=function(){return d.screen.width+" x "+d.screen.height+" px, "+d.screen.color_depth+" bit"}}function p(a,b){var d=a;h(a,"ua",function(){return(new c).getResult()},b),d.ua.toString=function(){return d.ua.ua},d.ua.browser.toString=function(){var a=d.ua.browser,b=a.name||"";return b+=a.major&&" "+a.major||"",b+=a.version&&" ("+a.version+")"||""},d.ua.device.toString=function(){var a=d.ua.device,b=a.vendor||"";return b+=a.model&&" "+a.model||"",b+=a.type&&" ("+a.type+")"||""},d.ua.engine.toString=function(){var a=d.ua.engine,b=a.name||"";return b+=a.version&&" "+a.version||""},d.ua.os.toString=function(){var a=d.ua.os,b=a.name||"";return b+=a.version&&" "+a.version||""}}function q(a){var c=a;b.getJSON("//freegeoip.net/json/?callback=?",function(b){c.geo={ip:b.ip,position:{latitude:b.latitude,longitude:b.longitude},address:{country:b.country_name,region:b.region_name,city:b.city}},c.geo.position.toString=function(){var a=c.geo.position;return a.latitude?a.latitude+", "+a.longitude:""},c.geo.address.toString=function(){var a=c.geo.address,b=a.country||"";return b+=a.region&&", "+a.region||"",b+=a.city&&", "+a.city||""},r.on_geo&&r.on_geo(a)})}function r(a,b){var c=this;b=b||{},i(c,a),j(c,a),k(c,a),l(c,a),m(c,a),n(c,a),o(c,a),p(c,a),b.geo&&q(c,a)}var s=a.navigator;return r.on_geo=null,a.WhatBrowser=r,r}(window,jQuery,window.UAParser,window.swfobject,window.deployJava),function(){"use strict";function a(b,c){function d(a){return'"'+a+'"'}var e,f=c?b[c]:b,g="";if(e=typeof f,"object"===e){g+=c?d(c)+":{":"{";for(var h in f)g+=a(f,h);g+="},"}else"function"===e||(g+="string"===e?d(c)+":"+d(f)+",":d(c)+":"+f+",");return g}return window.Hashcode={serialize:window.JSON?window.JSON.stringify:a},window.Hashcode}(),function(a,b,c,d){"use strict";function e(){function a(){var a=window.location.hash;return a&&"#!"===a.substr(0,2)?{value:a.substr(2),own:!1}:null}function c(){if(b.enabled){var a=b.get("whatbrowser");if(a)return{value:a,own:!0}}return null}return a()||c()}function f(){var d=new c(null,{geo:!0}),e=new h,f=a.Deferred();return e.save(d).then(function(a){d.id=a.id,d.link="http://whatbrowser.ru/#!"+d.id,b.enabled&&b.set("whatbrowser",d.id,{expires:28800}),f.resolve(d)},function(a){f.reject(d,a)}),f}function g(b){var e=new d.Query(h),f=a.Deferred();return e.get(b).then(function(a){var b=new c(a.attributes,{geo:!0});b.id=a.id,b.link="http://whatbrowser.ru/#!"+b.id,f.resolve(b)},function(a){f.reject(a)}),f}d.initialize("WxMn71WOwf2RM6s6vYR57Th1rsfRplumcDDaWQxF","aomlkmdE6QrVTF0FRoX4XgyJFqR2FP2W4QtLJg7A");var h=d.Object.extend("WhatBrowser");return window.WhatBrowserManager={get_id:e,create:f,load:g},window.WhatBrowserManager}(window.jQuery,window.Cookies,window.WhatBrowser,window.Parse),function(a,b,c,d,e){"use strict";function f(a,b){var c=b.toString?b.toString():""+b;return c?"<tr><th>"+a+"</th><td>"+c+"</td></tr>":""}function g(a){var b="";return b+=f("Куки",a.cookies?"да":"нет"),b+=f("Флеш",a.flash),b+=f("Java",a.java),b+=f("Язык",a.language),b+=f("Страница",a.browser_size),b+=f("Экран",a.screen),b+=f("Браузер",a.ua.browser),b+=f("Движок",a.ua.engine),b+=f("ОС",a.ua.os),b+=f("Устройство",a.ua.device),b+=f("Юзер-агент",a.ua)}function h(a,b){var c="";return b?a.ua.browser.name?(c="У вас "+a.ua.browser.name+" "+a.ua.browser.major,c+=a.ua.os.name?" на "+a.ua.os.name:""):c="У вас неизвестный науке браузер :-(":c='Вы смотрите браузер по ссылке <a href="'+a.link+'">'+a.id+"</a>",c}function i(b){var d=a("#details-table").children("tbody"),e=d.html();e+=f("IP-адрес",b.geo.ip||""),e+=f("Местоположение",b.geo.address),d.html(e),a("#details-tocopy").val(c.serialize(b))}function j(b){b.id&&b.flash.enabled?a("#copy-value").val(b.link):b.id?(a("#info-link-copy").hide(),a("#mail-value").val(b.link),a("#info-link-mail").find("a").attr("href","mailto:?subject=Информация о моем браузере&body=http://whatbrowser.ru/#!"+b.id),a("#info-link-mail").show()):(a("#info-link").hide(),a("#info-nolink").show())}function k(b,d){var e=a("#details-table").children("tbody");e.html(g(b)),a("#details-tocopy").val(c.serialize(b)),a("#header-msg").html(h(b,d)),d?j(b):a("#info-link").hide(),a("#message").hide(),a("#result").fadeIn()}function l(c){var d=new b(c.get(0));d.on("aftercopy",function(b){var c=a(b.target).next();c.text("Скопировано!"),window.setTimeout(function(){c.text("")},500)})}function m(){a(".link-text").click(function(){a(this).select()}),b.config({hoverClass:"zero-hover",activeClass:"zero-active"}),l(a("#info-link").find("button"))}function n(b){e.load(b.value).done(function(a){k(a,b.own)}).fail(function(c){console.log("Failed to load by id "+b.value+": "+c.message),b.own?o():a("#message").find("h2").text("По этой ссылке ничего нет :-(")})}function o(){e.create().done(function(a){k(a,!0)}).fail(function(a,b){console.log("Failed to save browser info: "+b.message),k(a,!0)})}a(function(){m(),d.on_geo=i;var a=e.get_id();a?n(a):o()})}(window.jQuery,window.ZeroClipboard,window.Hashcode,window.WhatBrowser,window.WhatBrowserManager);